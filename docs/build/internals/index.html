<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internal · CoTETE.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">CoTETE.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../background/">Background</a></li><li><a class="tocitem" href="../quickStart/">Quick Start</a></li><li><a class="tocitem" href="../quickStartPython/">Quick Start (Python)</a></li><li><a class="tocitem" href="../public/">Public Interface</a></li><li class="is-active"><a class="tocitem" href>Internal</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Internal</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internal</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/dpshorten/CoTETE.jl/blob/master/docs/src/internals.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Internal-1"><a class="docs-heading-anchor" href="#Internal-1">Internal</a><a class="docs-heading-anchor-permalink" href="#Internal-1" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="CoTETE.estimate_TE_from_preprocessed_data" href="#CoTETE.estimate_TE_from_preprocessed_data"><code>CoTETE.estimate_TE_from_preprocessed_data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">estimate_TE_from_preprocessed_data(parameters::CoTETEParameters, preprocessed_data::PreprocessedData)</code></pre><p>calculates the TE using the preprocessed data and the given parameters.</p><pre><code class="language-julia-repl">julia&gt; source = sort(1e4*rand(Int(1e4)));

julia&gt; target = sort(1e4*rand(Int(1e4)));

julia&gt; parameters = CoTETE.CoTETEParameters(l_x = 1, l_y = 1);

julia&gt; preprocessed_data = CoTETE.preprocess_event_times(parameters, target, source_events = source);

julia&gt; TE = CoTETE.estimate_TE_from_preprocessed_data(parameters, preprocessed_data)
0.0

julia&gt; abs(TE - 0) &lt; 0.05 # For Doctesting purposes
true
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpshorten/CoTETE.jl/blob/2655d304b43e4a256ab8635bc7e076e5f16c93ab/src/CoTETE.jl#L471-L492">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CoTETE.make_surrogate!" href="#CoTETE.make_surrogate!"><code>CoTETE.make_surrogate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">function make_surrogate!(
    parameters::CoTETEParameters,
    preprocessed_data::PreprocessedData,
    target_events::Array{&lt;:AbstractFloat},
    source_events::Array{&lt;:AbstractFloat};
    conditioning_events::Array{&lt;:AbstractFloat} = Float32[],
)</code></pre><p>Edit the source component of <code>preprocessed_data.representation_joint</code> such that it conforms to the null hypothesis of conditional independence.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpshorten/CoTETE.jl/blob/2655d304b43e4a256ab8635bc7e076e5f16c93ab/src/preprocessing.jl#L184-L195">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CoTETE.make_AIS_surrogate!" href="#CoTETE.make_AIS_surrogate!"><code>CoTETE.make_AIS_surrogate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">function make_AIS_surrogate!(
    parameters::CoTETEParameters,
    preprocessed_data::PreprocessedData,
    target_events::Array{&lt;:AbstractFloat},
)</code></pre><p>Edit <code>preprocessed_data.representation_joint</code> such that it conforms to the null hypothesis of the target histories being independent of events in the target process.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpshorten/CoTETE.jl/blob/2655d304b43e4a256ab8635bc7e076e5f16c93ab/src/preprocessing.jl#L260-L269">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CoTETE.preprocess_event_times" href="#CoTETE.preprocess_event_times"><code>CoTETE.preprocess_event_times</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">function preprocess_event_times(
    parameters::CoTETEParameters,
    target_events::Array{&lt;:AbstractFloat};
    source_events::Array{&lt;:AbstractFloat} = Float32[],
    conditioning_events::Array{&lt;:AbstractFloat} = Float32[]
)</code></pre><p>Use the raw event times to create the history embeddings and other prerequisites for estimating the TE.</p><pre><code class="language-julia-repl">julia&gt; parameters = CoTETE.CoTETEParameters(l_x = 1, l_y = 1);

julia&gt; source = cumsum(ones(5)) .- 0.5; # source is {0.5, 1.5, 2.5, ...}

julia&gt; target = cumsum(ones(5)); # target is {1, 2, 3, ...}

julia&gt; preprocessed_data = CoTETE.preprocess_event_times(parameters, target, source_events = source);

julia&gt; println(preprocessed_data.representation_joint) # All target events will be one unit back, all source events 0.5 units
[1.0 1.0 1.0 1.0; 0.5 0.5 0.5 0.5]
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpshorten/CoTETE.jl/blob/2655d304b43e4a256ab8635bc7e076e5f16c93ab/src/preprocessing.jl#L301-L324">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CoTETE.make_embeddings_along_observation_time_points" href="#CoTETE.make_embeddings_along_observation_time_points"><code>CoTETE.make_embeddings_along_observation_time_points</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">function make_embeddings_along_observation_time_points(
    observation_time_points::Array{&lt;:AbstractFloat},
    start_observation_time_point::Integer,
    num_observation_time_points_to_use::Integer,
    event_time_arrays::Array{&lt;:Array{&lt;:AbstractFloat,1},1},
    embedding_lengths::Array{&lt;:Integer},
)</code></pre><p>Constructs a set of embeddings from a set of observation points. The observation points and the raw event times are assumed to be sorted. Also returns the exlcusion windows.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; source = cumsum(ones(20)) .- 0.5; # source is {0.5, 1.5, 2.5, ...}

julia&gt; conditional = cumsum(ones(20)) .- 0.25; # conditional is {0.75, 1.75, 2.75, ...}

julia&gt; target = cumsum(ones(20)); # target is {1, 2, 3, ...}

julia&gt; observation_points = cumsum(ones(20)) .- 0.75; # observation points are {0.25, 1.25, 2.25, ...}

julia&gt; CoTETE.make_embeddings_along_observation_time_points(observation_points, 5, 2, [target, source, conditional], [2, 1, 1])
([0.25 0.25 0.25; 1.0 1.0 1.0; 0.75 0.75 0.75; 0.5 0.5 0.5], [3.0 4.25]

[4.0 5.25]

[5.0 6.25])
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpshorten/CoTETE.jl/blob/2655d304b43e4a256ab8635bc7e076e5f16c93ab/src/preprocessing.jl#L112-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CoTETE.make_one_embedding" href="#CoTETE.make_one_embedding"><code>CoTETE.make_one_embedding</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">function make_one_embedding(
    observation_time_point::AbstractFloat,
    event_time_arrays::Array{&lt;:Array{&lt;:AbstractFloat, 1}, 1},
    most_recent_event_indices::Array{&lt;:Integer},
    embedding_lengths::Array{&lt;:Integer},
)</code></pre><p>Constructs the history embedding from a given point in time. Also returns the timestamp of the earliest event used in the construction of the embedding. This is used for recording the exclusion windows.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; source = cumsum(ones(20)) .- 0.5; # source is {0.5, 1.5, 2.5, ...}

julia&gt; conditional = cumsum(ones(20)) .- 0.25; # conditional is {0.75, 1.75, 2.75, ...}

julia&gt; target = cumsum(ones(20)); # target is {1, 2, 3, ...}

julia&gt; CoTETE.make_one_embedding(5.25, [target, source, conditional], [5, 5, 5], [2, 3, 1])
(Any[0.25, 1.0, 0.75, 1.0, 1.0, 0.5], 2.5)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpshorten/CoTETE.jl/blob/2655d304b43e4a256ab8635bc7e076e5f16c93ab/src/preprocessing.jl#L53-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CoTETE.PreprocessedData" href="#CoTETE.PreprocessedData"><code>CoTETE.PreprocessedData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">representation_joint::Array{&lt;:AbstractFloat, 2}
representation_conditionals::Array{&lt;:AbstractFloat, 2}
exclusion_windows::Array{&lt;:AbstractFloat, 3}
sampled_representation_joint::Array{&lt;:AbstractFloat, 2}
sampled_representation_conditionals::Array{&lt;:AbstractFloat, 2}
sampled_exclusion_windows::Array{&lt;:AbstractFloat, 3}
start_timestamp::AbstractFloat
end_timestamp::AbstractFloat</code></pre><p>The transformed data that is fed into the search trees.</p><ul><li><code>representation_joint::Array{&lt;:AbstractFloat, 2}</code>: Contains the history representation of the source, target and extra conditioning process at each target event. Has dimension <span>$(l_X + l_{Z_1} + l_Y) \times N_X$</span>. Rows 1 to <span>$l_X$</span> (inclusive) contain the components relating to the target process. Rows <span>$l_X + 1$</span> to <span>$l_X + l_{Z_1}$</span> contain the components relating to the conditioning process. Rows <span>$l_X  + l_{Z_1} + 1$</span> to <span>$l_X + l_{Z_1} + l_Y$</span> contain the components relating to the source process. A similar convention is used by <code>sampled_representation_joint</code>. Note that we do not include an array in this struct to keep track of the history embeddings for the conditioning variables. This is because this array is simply the first <span>$l_X + l_{Z_1}$</span> rows of this array and so can easily be constructed on the fly later.</li><li><code>exclusion_windows::Array{&lt;:AbstractFloat, 3}</code>: Contains records of the time windows around each representation made at target events which must be excluded when doing <span>$k$</span>NN searches from that representation. By default, each representation has the window that is bound to the left by the first point in time that was used to make an embedding at that sample and to the right by the timestamp of the target event itself. An extra window might be added if the representation is a surrogate. In this case, the second window will be the original window of the representation with which the source component is swapped. Has dimension <span>$N_E \times 2 \times N_X$</span>. <span>$N_E$</span> is the number of exclusion windows the representation has (one by default, two if it is a surrogate). Note that a single set of exclusion windows is used for the representations of both the joints and the conditionals. Using separate sets of windows would allow them to be slightly smaller, but the effect will be negligible for longer processes.</li><li><code>sampled_representation_joint::Array{&lt;:AbstractFloat, 2}</code>: Contains the history representation of the source, target and extra conditioning processes at each sample point. Has dimension <span>$(l_X + l_Y + l_{Z_1}) \times N_U$</span>. See the description of <code>representation_joint</code> for a description of how the variables are split accross the dimensions.</li><li><code>sampled_exclusion_windows::Array{&lt;:AbstractFloat, 3}</code>: Same as for the <code>exclusion_windows</code>, but contains the windows around the representations constructed at sample points.</li><li><code>start_timestamp::AbstractFloat</code>: The raw timestamp of the first target event that is included in the analysis.</li><li><code>end_timestamp::AbstractFloat</code>: The raw timestamp of the last target event that is included in the analysis.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpshorten/CoTETE.jl/blob/2655d304b43e4a256ab8635bc7e076e5f16c93ab/src/preprocessing.jl#L6-L43">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../public/">« Public Interface</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 16 July 2020 21:20">Thursday 16 July 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
